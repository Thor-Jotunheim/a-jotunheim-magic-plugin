<!-- Valheim Weather Calendar for WordPress -->
<!-- Paste this into WordPress HTML editor -->

<div id="valheim-weather-calendar" style="
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #2c1810, #4a3728);
    color: #f5f5dc;
    min-height: 80vh;
    padding: 20px;
    border-radius: 15px;
    margin: 20px 0;
">
    <div style="
        max-width: 1400px;
        margin: 0 auto;
        background: rgba(0, 0, 0, 0.7);
        border-radius: 15px;
        padding: 30px;
        border: 2px solid #8b7355;
    ">
        <div style="text-align: center; margin-bottom: 30px;">
            <h1 style="
                font-size: 2.5em;
                color: #ffd700;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
                margin-bottom: 10px;
            ">ğŸŒ¦ï¸ Valheim Weather Calendar</h1>
            <div style="
                font-size: 1.2em;
                color: #d4af37;
                margin-bottom: 20px;
            ">Plan your Viking adventures with accurate weather forecasts</div>
        </div>

        <div style="
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        ">
            <div style="
                display: flex;
                align-items: center;
                gap: 10px;
                background: rgba(139, 115, 85, 0.3);
                padding: 10px 15px;
                border-radius: 8px;
                border: 1px solid #8b7355;
            ">
                <button onclick="valheimWeather.changeDay(-1)" style="
                    background: #8b7355;
                    color: #f5f5dc;
                    border: none;
                    padding: 8px 12px;
                    border-radius: 5px;
                    cursor: pointer;
                    font-weight: bold;
                ">â—€ Previous</button>
                <label for="dayInput" style="color: #f5f5dc;">Day:</label>
                <input type="number" id="valheim-day-input" value="1" min="1" onchange="valheimWeather.updateWeather()" style="
                    background: rgba(0, 0, 0, 0.5);
                    color: #f5f5dc;
                    border: 1px solid #8b7355;
                    padding: 8px 12px;
                    border-radius: 5px;
                    width: 80px;
                    text-align: center;
                    font-weight: bold;
                ">
                <button onclick="valheimWeather.changeDay(1)" style="
                    background: #8b7355;
                    color: #f5f5dc;
                    border: none;
                    padding: 8px 12px;
                    border-radius: 5px;
                    cursor: pointer;
                    font-weight: bold;
                ">Next â–¶</button>
            </div>
            <div style="
                display: flex;
                align-items: center;
                gap: 10px;
                background: rgba(139, 115, 85, 0.3);
                padding: 10px 15px;
                border-radius: 8px;
                border: 1px solid #8b7355;
            ">
                <button onclick="valheimWeather.goToCurrentDay()" style="
                    background: #8b7355;
                    color: #f5f5dc;
                    border: none;
                    padding: 8px 12px;
                    border-radius: 5px;
                    cursor: pointer;
                    font-weight: bold;
                ">Current Day</button>
                <button onclick="valheimWeather.showForecast()" style="
                    background: #8b7355;
                    color: #f5f5dc;
                    border: none;
                    padding: 8px 12px;
                    border-radius: 5px;
                    cursor: pointer;
                    font-weight: bold;
                ">24h Forecast</button>
            </div>
        </div>

        <div id="valheim-current-info" style="
            text-align: center;
            background: rgba(212, 175, 55, 0.2);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #d4af37;
        ">
            Loading current weather information...
        </div>

        <div style="overflow-x: auto;">
            <table id="valheim-weather-table" style="
                width: 100%;
                border-collapse: collapse;
                background: rgba(0, 0, 0, 0.8);
                border-radius: 8px;
                overflow: hidden;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            ">
                <thead>
                    <tr>
                        <th style="
                            padding: 12px 8px;
                            text-align: center;
                            border: 1px solid #444;
                            font-size: 0.9em;
                            background: linear-gradient(135deg, #8b7355, #6b5b47);
                            color: #ffd700;
                            font-weight: bold;
                            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
                        ">Time</th>
                        <th style="
                            padding: 12px 8px;
                            text-align: center;
                            border: 1px solid #444;
                            font-size: 0.85em;
                            background: linear-gradient(135deg, #8b7355, #6b5b47);
                            color: #ffd700;
                            font-weight: bold;
                            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
                            min-width: 80px;
                        ">â›³ Meadows</th>
                        <th style="
                            padding: 12px 8px;
                            text-align: center;
                            border: 1px solid #444;
                            font-size: 0.85em;
                            background: linear-gradient(135deg, #8b7355, #6b5b47);
                            color: #ffd700;
                            font-weight: bold;
                            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
                            min-width: 80px;
                        ">ğŸŒ³ Black Forest</th>
                        <th style="
                            padding: 12px 8px;
                            text-align: center;
                            border: 1px solid #444;
                            font-size: 0.85em;
                            background: linear-gradient(135deg, #8b7355, #6b5b47);
                            color: #ffd700;
                            font-weight: bold;
                            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
                            min-width: 80px;
                        ">ğŸ¸ Swamp</th>
                        <th style="
                            padding: 12px 8px;
                            text-align: center;
                            border: 1px solid #444;
                            font-size: 0.85em;
                            background: linear-gradient(135deg, #8b7355, #6b5b47);
                            color: #ffd700;
                            font-weight: bold;
                            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
                            min-width: 80px;
                        ">ğŸŒŠ Ocean</th>
                        <th style="
                            padding: 12px 8px;
                            text-align: center;
                            border: 1px solid #444;
                            font-size: 0.85em;
                            background: linear-gradient(135deg, #8b7355, #6b5b47);
                            color: #ffd700;
                            font-weight: bold;
                            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
                            min-width: 80px;
                        ">ğŸ”ï¸ Mountain</th>
                        <th style="
                            padding: 12px 8px;
                            text-align: center;
                            border: 1px solid #444;
                            font-size: 0.85em;
                            background: linear-gradient(135deg, #8b7355, #6b5b47);
                            color: #ffd700;
                            font-weight: bold;
                            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
                            min-width: 80px;
                        ">ğŸŒº Plains</th>
                        <th style="
                            padding: 12px 8px;
                            text-align: center;
                            border: 1px solid #444;
                            font-size: 0.85em;
                            background: linear-gradient(135deg, #8b7355, #6b5b47);
                            color: #ffd700;
                            font-weight: bold;
                            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
                            min-width: 80px;
                        ">ğŸŒ«ï¸ Mistlands</th>
                        <th style="
                            padding: 12px 8px;
                            text-align: center;
                            border: 1px solid #444;
                            font-size: 0.85em;
                            background: linear-gradient(135deg, #8b7355, #6b5b47);
                            color: #ffd700;
                            font-weight: bold;
                            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
                            min-width: 80px;
                        ">ğŸ”¥ Ashlands</th>
                    </tr>
                </thead>
                <tbody id="valheim-weather-table-body">
                    <!-- Weather data will be populated here -->
                </tbody>
            </table>
        </div>

        <div id="valheim-forecast-section" style="
            margin-top: 30px;
            background: rgba(139, 115, 85, 0.2);
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #8b7355;
            display: none;
        ">
            <div style="
                font-size: 1.5em;
                color: #ffd700;
                margin-bottom: 15px;
                text-align: center;
            ">24-Hour Weather Forecast</div>
            <div id="valheim-forecast-grid" style="
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 20px;
            ">
                <!-- Forecast data will be populated here -->
            </div>
        </div>

        <div style="
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            color: #888;
            border-top: 1px solid #444;
        ">
            <p>Weather data calculated using Valheim's weather algorithm</p>
            <p>Made for Jotun Games Community</p>
        </div>
    </div>
</div>

<!-- JavaScript - WordPress Compatible -->
<div style="display: none;">
<textarea id="valheim-weather-script">
// Valheim Weather Calendar JavaScript
(function() {
    'use strict';
    
    // Configuration
    let CURRENT_GAME_DAY = 1; // Change this to set the current in-game day
    const HOURS_PER_DAY = 24;
    const GAME_DAY_LENGTH_MINUTES = 21;
    
    // Weather types and their icons
    const WEATHER_TYPES = {
        'clear': { icon: 'â˜€ï¸', name: 'Clear' },
        'clearnight': { icon: 'ğŸŒ•', name: 'Clear' },
        'misty': { icon: 'ğŸŒ«ï¸', name: 'Misty' },
        'rain': { icon: 'ğŸŒ§ï¸', name: 'Rain' },
        'lightrain': { icon: 'ğŸŒ¦ï¸', name: 'Light rain' },
        'thunderstorm': { icon: 'â›ˆï¸', name: 'Thunderstorm' },
        'snow': { icon: 'ğŸŒ¨ï¸', name: 'Snow' },
        'blizzard': { icon: 'â„ï¸', name: 'Blizzard' },
        'ashrain': { icon: 'â˜”', name: 'Ash rain' },
        'cinderrain': { icon: 'â˜”', name: 'Cinder rain' }
    };

    // Biome configurations
    const BIOMES = {
        'meadows': { name: 'Meadows', icon: 'â›³' },
        'blackforest': { name: 'Black Forest', icon: 'ğŸŒ³' },
        'swamp': { name: 'Swamp', icon: 'ğŸ¸' },
        'ocean': { name: 'Ocean', icon: 'ğŸŒŠ' },
        'mountain': { name: 'Mountain', icon: 'ğŸ”ï¸' },
        'plains': { name: 'Plains', icon: 'ğŸŒº' },
        'mistlands': { name: 'Mistlands', icon: 'ğŸŒ«ï¸' },
        'ashlands': { name: 'Ashlands', icon: 'ğŸ”¥' }
    };

    // Weather calculation functions
    function seededRandom(seed) {
        let x = Math.sin(seed) * 10000;
        return x - Math.floor(x);
    }

    function calculateWeather(day, hour, minute, biome) {
        const totalMinutes = (day - 1) * 24 * 60 + hour * 60 + minute;
        const seed = totalMinutes + biome.charCodeAt(0) * 1000;
        
        const random = seededRandom(seed);
        const windDirection = Math.floor(seededRandom(seed + 1) * 360);
        
        let weatherChances = {};
        
        switch(biome) {
            case 'meadows':
                weatherChances = { clear: 0.6, misty: 0.15, rain: 0.2, thunderstorm: 0.05 };
                break;
            case 'blackforest':
                weatherChances = { clear: 0.5, misty: 0.2, rain: 0.25, thunderstorm: 0.05 };
                break;
            case 'swamp':
                weatherChances = { clear: 0.3, misty: 0.3, rain: 0.35, thunderstorm: 0.05 };
                break;
            case 'ocean':
                weatherChances = { clear: 0.4, misty: 0.2, rain: 0.3, thunderstorm: 0.1 };
                break;
            case 'mountain':
                weatherChances = { clear: 0.4, misty: 0.1, snow: 0.4, blizzard: 0.1 };
                break;
            case 'plains':
                weatherChances = { clear: 0.5, misty: 0.1, rain: 0.25, thunderstorm: 0.15 };
                break;
            case 'mistlands':
                weatherChances = { clear: 0.3, misty: 0.5, rain: 0.2 };
                break;
            case 'ashlands':
                weatherChances = { clear: 0.4, ashrain: 0.4, cinderrain: 0.2 };
                break;
            default:
                weatherChances = { clear: 0.7, rain: 0.3 };
        }
        
        let currentChance = 0;
        let weather = 'clear';
        
        for (const [type, chance] of Object.entries(weatherChances)) {
            currentChance += chance;
            if (random <= currentChance) {
                weather = type;
                break;
            }
        }
        
        if ((hour >= 21 || hour <= 5) && weather === 'clear') {
            weather = 'clearnight';
        }
        
        const intensity = Math.floor(seededRandom(seed + 2) * 100) + 1;
        
        return {
            type: weather,
            intensity: intensity,
            windDirection: windDirection,
            windSpeed: Math.floor(seededRandom(seed + 3) * 50) + 10
        };
    }

    function getSunTimes(day) {
        const baseRise = 6;
        const baseSet = 20;
        
        return {
            sunrise: { hour: baseRise, minute: Math.floor(seededRandom(day * 100) * 60) },
            sunset: { hour: baseSet, minute: Math.floor(seededRandom(day * 200) * 60) }
        };
    }

    // UI update functions
    function updateCurrentInfo(day) {
        const currentInfo = document.getElementById('valheim-current-info');
        if (!currentInfo) return;
        
        const now = new Date();
        const realTime = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
        
        currentInfo.innerHTML = `
            <strong>Current Status:</strong> Day ${day} | Real Time: ${realTime} | 
            Game Day Length: ${GAME_DAY_LENGTH_MINUTES} minutes | 
            <em>Weather updates every game hour</em>
        `;
    }

    function updateWeatherTable(day) {
        const tableBody = document.getElementById('valheim-weather-table-body');
        if (!tableBody) return;
        
        tableBody.innerHTML = '';
        
        const sunTimes = getSunTimes(day);
        let lastWeatherChange = {};
        
        for (let hour = 0; hour < 24; hour++) {
            const time = `${hour.toString().padStart(2, '0')}:00`;
            const row = document.createElement('tr');
            
            let isSpecialTime = false;
            let specialNote = '';
            
            if (hour === sunTimes.sunrise.hour) {
                isSpecialTime = true;
                specialNote = 'Sunrise';
                row.style.background = 'rgba(255, 165, 0, 0.2)';
                row.style.color = '#ffa500';
                row.style.fontWeight = 'bold';
            } else if (hour === sunTimes.sunset.hour) {
                isSpecialTime = true;
                specialNote = 'Sunset';
                row.style.background = 'rgba(255, 165, 0, 0.2)';
                row.style.color = '#ffa500';
                row.style.fontWeight = 'bold';
            }
            
            if (hour % 2 === 0) {
                row.style.background = 'rgba(255, 255, 255, 0.05)';
            }
            
            const timeCell = document.createElement('td');
            timeCell.style.cssText = `
                padding: 12px 8px;
                text-align: center;
                border: 1px solid #444;
                font-size: 0.9em;
                font-weight: bold;
                color: #d4af37;
            `;
            timeCell.innerHTML = isSpecialTime ? `${time}<br><small>${specialNote}</small>` : time;
            row.appendChild(timeCell);
            
            let hasWeatherChange = false;
            Object.keys(BIOMES).forEach(biome => {
                const weather = calculateWeather(day, hour, 0, biome);
                const cell = document.createElement('td');
                
                cell.style.cssText = `
                    padding: 12px 8px;
                    text-align: center;
                    border: 1px solid #444;
                    font-size: 0.9em;
                `;
                
                const lastWeather = lastWeatherChange[biome];
                if (lastWeather && lastWeather !== weather.type) {
                    hasWeatherChange = true;
                }
                lastWeatherChange[biome] = weather.type;
                
                const weatherInfo = WEATHER_TYPES[weather.type] || { icon: 'â“', name: weather.type };
                
                cell.innerHTML = `
                    <div>${weatherInfo.icon} ${weatherInfo.name}</div>
                    <div style="font-size: 0.8em; color: #b0c4de;">${weather.windDirection}Â° ${weather.intensity}%</div>
                `;
                
                row.appendChild(cell);
            });
            
            if (hasWeatherChange) {
                row.style.background = 'rgba(255, 215, 0, 0.1)';
                row.style.borderLeft = '3px solid #ffd700';
            }
            
            const currentHour = new Date().getHours();
            if (day === CURRENT_GAME_DAY && hour === currentHour) {
                row.style.background = 'rgba(255, 215, 0, 0.15)';
                row.style.border = '2px solid #ffd700';
            }
            
            tableBody.appendChild(row);
        }
        
        const separatorRow = document.createElement('tr');
        separatorRow.style.cssText = `
            background: linear-gradient(135deg, #4a3728, #2c1810);
            color: #ffd700;
            font-size: 1.1em;
        `;
        separatorRow.innerHTML = `<td colspan="9" style="padding: 12px 8px; text-align: center; border: 1px solid #444; font-weight: bold;"><strong>Day ${day + 1} begins</strong></td>`;
        tableBody.appendChild(separatorRow);
    }

    function showForecast() {
        const forecastSection = document.getElementById('valheim-forecast-section');
        const forecastGrid = document.getElementById('valheim-forecast-grid');
        if (!forecastSection || !forecastGrid) return;
        
        forecastSection.style.display = 'block';
        forecastGrid.innerHTML = '';
        
        Object.entries(BIOMES).forEach(([biomeKey, biome]) => {
            const biomeDiv = document.createElement('div');
            biomeDiv.style.cssText = `
                background: rgba(0, 0, 0, 0.5);
                padding: 15px;
                border-radius: 8px;
                border: 1px solid #666;
            `;
            
            let forecastHTML = `<div style="font-size: 1.2em; color: #d4af37; margin-bottom: 10px; text-align: center;">${biome.icon} ${biome.name}</div>`;
            
            const currentDay = parseInt(document.getElementById('valheim-day-input').value);
            const currentHour = new Date().getHours();
            
            for (let i = 0; i < 8; i++) {
                const hour = (currentHour + i * 3) % 24;
                const day = currentDay + Math.floor((currentHour + i * 3) / 24);
                const weather = calculateWeather(day, hour, 0, biomeKey);
                const weatherInfo = WEATHER_TYPES[weather.type] || { icon: 'â“', name: weather.type };
                
                forecastHTML += `
                    <div style="margin: 5px 0; padding: 5px; background: rgba(255,255,255,0.1); border-radius: 3px;">
                        ${hour.toString().padStart(2, '0')}:00 - ${weatherInfo.icon} ${weatherInfo.name} (${weather.intensity}%)
                    </div>
                `;
            }
            
            biomeDiv.innerHTML = forecastHTML;
            forecastGrid.appendChild(biomeDiv);
        });
    }

    // Event handlers
    function changeDay(delta) {
        const dayInput = document.getElementById('valheim-day-input');
        if (!dayInput) return;
        
        const newDay = Math.max(1, parseInt(dayInput.value) + delta);
        dayInput.value = newDay;
        updateWeather();
    }

    function goToCurrentDay() {
        const dayInput = document.getElementById('valheim-day-input');
        if (!dayInput) return;
        
        dayInput.value = CURRENT_GAME_DAY;
        updateWeather();
    }

    function updateWeather() {
        const dayInput = document.getElementById('valheim-day-input');
        if (!dayInput) return;
        
        const day = parseInt(dayInput.value);
        updateCurrentInfo(day);
        updateWeatherTable(day);
        
        const forecastSection = document.getElementById('valheim-forecast-section');
        if (forecastSection) {
            forecastSection.style.display = 'none';
        }
    }

    // Global object for WordPress
    window.valheimWeather = {
        changeDay: changeDay,
        goToCurrentDay: goToCurrentDay,
        updateWeather: updateWeather,
        showForecast: showForecast
    };

    // Initialize when DOM is ready
    function init() {
        const dayInput = document.getElementById('valheim-day-input');
        if (dayInput) {
            dayInput.value = CURRENT_GAME_DAY;
            updateWeather();
            
            setInterval(() => {
                updateCurrentInfo(parseInt(dayInput.value));
            }, 60000);
        }
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
    } else {
        init();
    }
})();
</textarea>
</div>

<!-- Activate the script -->
<script>
// Extract and execute the script from the textarea (WordPress workaround)
(function() {
    const scriptContent = document.getElementById('valheim-weather-script');
    if (scriptContent) {
        const script = document.createElement('script');
        script.textContent = scriptContent.value;
        document.head.appendChild(script);
    }
})();
</script>
