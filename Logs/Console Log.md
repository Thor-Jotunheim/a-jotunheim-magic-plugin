JQMIGRATE: Migrate is installed, version 3.4.1Jotunheim Comprehensive API loadedğŸš€ğŸš€ï¿½ UNIFIED TELLER: Initialization check:ğŸš€ğŸš€ï¿½ UNIFIED TELLER: Conditions met, initializing UnifiedTeller...ï¿½ğŸš€ğŸš€ UNIFIED TELLER: Event listener registered for shopRotationChangedDEBUG: Clear transaction button found:
DEBUG: Clear transaction event listener attachedUnifiedTeller: Starting to load initial data...JotunAPI is available, loading data...Loading shops for selector...JotunAPI status:"object"jotun_api_vars:Testing direct API call to:"/wp-json/jotun-api/v1/shops"Making API request:"GET""/wp-json/jotun-api/v1/shops"nullRequest config:Sending fetch request...UnifiedTeller constructor completed, preventOverLimit method:"function"Response received:200"OK"Response data:Shop API response:Shops data received:DEBUG - Populating unified teller shop selector with:DEBUG - Processing shop:DEBUG - Added shop option:"Aesir Spells & Items""with rotation:""1"DEBUG - Processing shop:DEBUG - Added shop option:"Call to Arms""with rotation:""1"DEBUG - Processing shop:DEBUG - Added shop option:"Popup Shop""with rotation:""1"DEBUG - Shop selector populated with3"active shops"Making API request:"GET""/wp-json/jotun-api/v1/playerlist"nullRequest config:Sending fetch request...Response received:200"OK"Response data:DEBUG - Loaded player list:Failed to load resource: the server responded with a status of 403 (Forbidden)User endpoint access denied - using fallbackğŸš¨ DEBUG: Current cart contents:ğŸš¨ DEBUG: Cart array set to empty. New length:0ğŸš¨ DEBUG: updateCartDisplay() calledğŸš¨ DEBUG: updateViewCartButton() calledğŸš¨ DEBUG: viewCartBtn found:trueğŸš¨ DEBUG: cart length:0ğŸš¨ DEBUG: cart contents:ğŸš¨ DEBUG: Updating View Cart button:ğŸš¨ DEBUG: View Cart button updated - disabled:true"text:""View Cart"ğŸš¨ DEBUG: updateViewCartButton() calledğŸš¨ DEBUG: updateRecordTransactionButton() calledDEBUG: resetItemDisplay() called. Cart length: 0DEBUG: Clearing 0 input fieldsğŸš¨ DEBUG: resetItemDisplay() calledğŸš¨ DEBUG: showShopView() calledğŸš¨ DEBUG: Setting isCartView to falseğŸš¨ DEBUG: shopInventoryCard found:trueğŸš¨ DEBUG: transactionSummaryCard found:trueğŸš¨ DEBUG: Buttons found - viewCart:true"record:"true"back:"trueğŸš¨ DEBUG: updateViewCartButton() calledğŸš¨ DEBUG: viewCartBtn found:trueğŸš¨ DEBUG: cart length:0ğŸš¨ DEBUG: cart contents:ğŸš¨ DEBUG: Updating View Cart button:ğŸš¨ DEBUG: View Cart button updated - disabled:true"text:""View Cart"ğŸš¨ DEBUG: showShopView() calledğŸš¨ğŸš¨ğŸš¨ DEBUG: clearCart() completed - CART CLEARING FINISHEDLoading shop items for shop ID:"138""rotation:""1"Making API request:"GET""/wp-json/jotun-api/v1/shop-items?shop_id=138&rotation=1"nullRequest config:Sending fetch request...DEBUG: About to force button state update. Cart length: 0ğŸš¨ DEBUG: forceButtonStateUpdate() called, cart length:0ğŸš¨ DEBUG: Cart contents:ğŸš¨ DEBUG: Found 0 turn-in buttons to updateğŸš¨ DEBUG: forceButtonStateUpdate() completedResponse received:200"OK"Response data:Raw shop items from API:Making API request:"GET""/wp-json/jotun-api/v1/itemlist"nullRequest config:Sending fetch request...Response received:200"OK"Response data:Item list response:Enriched shop items:No individual buy button found for item:"Unbreakable Oath"No sell button found for item:"Unbreakable Oath"No turn-in button found for item:"Unbreakable Oath"getCurrentShopType:Setting up tracking interface:ğŸš¨ DEBUG: updateViewCartButton() calledğŸš¨ DEBUG: viewCartBtn found:trueğŸš¨ DEBUG: cart length:0ğŸš¨ DEBUG: cart contents:ğŸš¨ DEBUG: Updating View Cart button:ğŸš¨ DEBUG: View Cart button updated - disabled:true"text:""View Cart"ğŸ” DEBUG Transaction History: selectedShop:"138"ğŸ” DEBUG Transaction History: selectedOption:ğŸ” DEBUG Transaction History: shopName from dataset:"Aesir Spells & Items"ğŸ” DEBUG Transaction History: shopType from dataset:"aesir"ğŸ” DEBUG Transaction History: Aesir shop detected - checking for customer to show ledger balanceğŸ” DEBUG Transaction History: No customer selected for Aesir shopğŸ” DEBUG Transaction History: Added shop_name filter:"Aesir Spells & Items"ğŸ” DEBUG Transaction History: Final params:Making API request:"GET""/wp-json/jotun-api/v1/transactions?shop_name=Aesir+Spells+%26+Items&limit=50"nullRequest config:Sending fetch request...Response received:200"OK"Response data:ğŸ” DEBUG Transaction History: API response:ğŸ” DEBUG Render Transaction History: transactions received:ğŸ” DEBUG Render Transaction History: selectedShop:"138"ğŸ” DEBUG Render Transaction History: Empty state message:"<div class=\"transaction-item\">Aesir shops use a balance system (jotun_ledger) rather than individual transaction records</div>"ğŸš¨ DEBUG: Current cart contents:ğŸš¨ DEBUG: Cart array set to empty. New length:0ğŸš¨ DEBUG: updateCartDisplay() calledğŸš¨ DEBUG: updateViewCartButton() calledğŸš¨ DEBUG: viewCartBtn found:trueğŸš¨ DEBUG: cart length:0ğŸš¨ DEBUG: cart contents:ğŸš¨ DEBUG: Updating View Cart button:ğŸš¨ DEBUG: View Cart button updated - disabled:true"text:""View Cart"ğŸš¨ DEBUG: updateViewCartButton() calledğŸš¨ DEBUG: updateRecordTransactionButton() calledDEBUG: resetItemDisplay() called. Cart length: 0DEBUG: Clearing 0 input fieldsNo individual buy button found for item:"Unbreakable Oath"No sell button found for item:"Unbreakable Oath"No turn-in button found for item:"Unbreakable Oath"ğŸš¨ DEBUG: resetItemDisplay() calledğŸš¨ DEBUG: showShopView() calledğŸš¨ DEBUG: Setting isCartView to falseğŸš¨ DEBUG: shopInventoryCard found:trueğŸš¨ DEBUG: transactionSummaryCard found:trueğŸš¨ DEBUG: Buttons found - viewCart:true"record:"true"back:"trueğŸš¨ DEBUG: updateViewCartButton() calledğŸš¨ DEBUG: viewCartBtn found:trueğŸš¨ DEBUG: cart length:0ğŸš¨ DEBUG: cart contents:ğŸš¨ DEBUG: Updating View Cart button:ğŸš¨ DEBUG: View Cart button updated - disabled:true"text:""View Cart"ğŸš¨ DEBUG: showShopView() calledğŸš¨ğŸš¨ğŸš¨ DEBUG: clearCart() completed - CART CLEARING FINISHEDLoading turn-in items for shop ID:"139""rotation:""1"Making API request:"GET""/wp-json/jotun-api/v1/shop-items?shop_id=139&rotation=1"nullRequest config:Sending fetch request...DEBUG: About to force button state update. Cart length: 0ğŸš¨ DEBUG: forceButtonStateUpdate() called, cart length:0ğŸš¨ DEBUG: Cart contents:ğŸš¨ DEBUG: Found 0 turn-in buttons to updateğŸš¨ DEBUG: forceButtonStateUpdate() completedResponse received:200"OK"Response data:Turn-in items response:Making API request:"GET""/wp-json/jotun-api/v1/itemlist"nullRequest config:Sending fetch request...Response received:200"OK"Response data:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - Turn-in progress calculation:Generating button for item 41: inCart=false, buttonText=Turn In, cartSize=0DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - Turn-in progress calculation:Generating button for item 38: inCart=false, buttonText=Turn In, cartSize=0DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - Turn-in progress calculation:Generating button for item 43: inCart=false, buttonText=Turn In, cartSize=0DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - Turn-in progress calculation:Generating button for item 40: inCart=false, buttonText=Turn In, cartSize=0DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - Turn-in progress calculation:Generating button for item 42: inCart=false, buttonText=Turn In, cartSize=0DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - Turn-in progress calculation:Generating button for item 39: inCart=false, buttonText=Turn In, cartSize=0Setting up turn-in tracking after loading itemsDEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - Turnin compact display:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - Turnin compact display:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - Turnin compact display:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - Turnin compact display:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - Turnin compact display:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - Turnin compact display:ğŸš¨ DEBUG: updateViewCartButton() calledğŸš¨ DEBUG: viewCartBtn found:trueğŸš¨ DEBUG: cart length:0ğŸš¨ DEBUG: cart contents:ğŸš¨ DEBUG: Updating View Cart button:ğŸš¨ DEBUG: View Cart button updated - disabled:true"text:""View Cart"ğŸ” DEBUG Transaction History: selectedShop:"139"ğŸ” DEBUG Transaction History: selectedOption:ğŸ” DEBUG Transaction History: shopName from dataset:"Call to Arms"ğŸ” DEBUG Transaction History: shopType from dataset:"turn-in_only"ğŸ” DEBUG Transaction History: Set transaction_type=turnin, shop_id=139ğŸ” DEBUG Transaction History: Added shop_name filter:"Call to Arms"ğŸ” DEBUG Transaction History: Final params:Making API request:"GET""/wp-json/jotun-api/v1/transactions?shop_name=Call+to+Arms&transaction_type=turnin&shop_id=139&limit=50"nullRequest config:Sending fetch request...Response received:200"OK"Response data:ğŸ” DEBUG Transaction History: API response:ğŸ” DEBUG Render Transaction History: transactions received:ğŸ” DEBUG Render Transaction History: selectedShop:"139"ğŸš¨ DEBUG: Current cart contents:ğŸš¨ DEBUG: Cart array set to empty. New length:0ğŸš¨ DEBUG: updateCartDisplay() calledğŸš¨ DEBUG: updateViewCartButton() calledğŸš¨ DEBUG: viewCartBtn found:trueğŸš¨ DEBUG: cart length:0ğŸš¨ DEBUG: cart contents:ğŸš¨ DEBUG: Updating View Cart button:ğŸš¨ DEBUG: View Cart button updated - disabled:true"text:""View Cart"ğŸš¨ DEBUG: updateViewCartButton() calledğŸš¨ DEBUG: updateRecordTransactionButton() calledDEBUG: resetItemDisplay() called. Cart length: 0DEBUG: Clearing 12 input fieldsDEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - Turn-in progress calculation:Generating button for item 41: inCart=false, buttonText=Turn In, cartSize=0DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - Turn-in progress calculation:Generating button for item 38: inCart=false, buttonText=Turn In, cartSize=0DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - Turn-in progress calculation:Generating button for item 43: inCart=false, buttonText=Turn In, cartSize=0DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - Turn-in progress calculation:Generating button for item 40: inCart=false, buttonText=Turn In, cartSize=0DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - Turn-in progress calculation:Generating button for item 42: inCart=false, buttonText=Turn In, cartSize=0DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - getMaxAllowedTurnin:DEBUG getDailyTurninTotal (using turn_in_quantity from item):DEBUG - Turn-in progress calculation:Generating button for item 39: inCart=false, buttonText=Turn In, cartSize=0ğŸš¨ DEBUG: resetItemDisplay() calledğŸš¨ DEBUG: showShopView() calledğŸš¨ DEBUG: Setting isCartView to falseğŸš¨ DEBUG: shopInventoryCard found:trueğŸš¨ DEBUG: transactionSummaryCard found:trueğŸš¨ DEBUG: Buttons found - viewCart:true"record:"true"back:"trueğŸš¨ DEBUG: updateViewCartButton() calledğŸš¨ DEBUG: viewCartBtn found:trueğŸš¨ DEBUG: cart length:0ğŸš¨ DEBUG: cart contents:ğŸš¨ DEBUG: Updating View Cart button:ğŸš¨ DEBUG: View Cart button updated - disabled:true"text:""View Cart"ğŸš¨ DEBUG: showShopView() calledğŸš¨ğŸš¨ğŸš¨ DEBUG: clearCart() completed - CART CLEARING FINISHEDLoading shop items for shop ID:"140""rotation:""1"Making API request:"GET""/wp-json/jotun-api/v1/shop-items?shop_id=140&rotation=1"nullRequest config:Sending fetch request...Response received:200"OK"Response data:Raw shop items from API:Making API request:"GET""/wp-json/jotun-api/v1/itemlist"nullRequest config:Sending fetch request...DEBUG: About to force button state update. Cart length: 0ğŸš¨ DEBUG: forceButtonStateUpdate() called, cart length:0ğŸš¨ DEBUG: Cart contents:ğŸš¨ DEBUG: Found 6 turn-in buttons to updateğŸš¨ DEBUG: Button for item 41: inCart=false, current text="Turn In", cart.length=0ğŸš¨ DEBUG: Button for item 38: inCart=false, current text="Turn In", cart.length=0ğŸš¨ DEBUG: Button for item 43: inCart=false, current text="Turn In", cart.length=0ğŸš¨ DEBUG: Button for item 40: inCart=false, current text="Turn In", cart.length=0ğŸš¨ DEBUG: Button for item 42: inCart=false, current text="Turn In", cart.length=0ğŸš¨ DEBUG: Button for item 39: inCart=false, current text="Turn In", cart.length=0ğŸš¨ DEBUG: forceButtonStateUpdate() completedResponse received:200"OK"Response data:Item list response:Enriched shop items:No individual buy button found for item:"Fader Trophy"No sell button found for item:"Fader Trophy"No turn-in button found for item:"Fader Trophy"No individual buy button found for item:"The Queen Trophy"No sell button found for item:"The Queen Trophy"No turn-in button found for item:"The Queen Trophy"No individual buy button found for item:"Yagluth Trophy"No sell button found for item:"Yagluth Trophy"No turn-in button found for item:"Yagluth Trophy"No individual buy button found for item:"Moder Trophy"No sell button found for item:"Moder Trophy"No turn-in button found for item:"Moder Trophy"No individual buy button found for item:"Bonemass Trophy"No sell button found for item:"Bonemass Trophy"No turn-in button found for item:"Bonemass Trophy"No individual buy button found for item:"The Elder Trophy"No sell button found for item:"The Elder Trophy"No turn-in button found for item:"The Elder Trophy"No individual buy button found for item:"Eikthyr Trophy"No sell button found for item:"Eikthyr Trophy"No turn-in button found for item:"Eikthyr Trophy"getCurrentShopType:Setting up tracking interface:ğŸš¨ DEBUG: updateViewCartButton() calledğŸš¨ DEBUG: viewCartBtn found:trueğŸš¨ DEBUG: cart length:0ğŸš¨ DEBUG: cart contents:ğŸš¨ DEBUG: Updating View Cart button:ğŸš¨ DEBUG: View Cart button updated - disabled:true"text:""View Cart"ğŸ” DEBUG Transaction History: selectedShop:"140"ğŸ” DEBUG Transaction History: selectedOption:ğŸ” DEBUG Transaction History: shopName from dataset:"Popup Shop"ğŸ” DEBUG Transaction History: shopType from dataset:"staff"ğŸ” DEBUG Transaction History: Added shop_name filter:"Popup Shop"ğŸ” DEBUG Transaction History: Final params:Making API request:"GET""/wp-json/jotun-api/v1/transactions?shop_name=Popup+Shop&limit=50"nullRequest config:Sending fetch request...Response received:200"OK"Response data:ğŸ” DEBUG Transaction History: API response:ğŸ” DEBUG Render Transaction History: transactions received:ğŸ” DEBUG Render Transaction History: selectedShop:"140"ğŸš¨ DEBUG: Current cart contents:ğŸš¨ DEBUG: Cart array set to empty. New length:0ğŸš¨ DEBUG: updateCartDisplay() calledğŸš¨ DEBUG: updateViewCartButton() calledğŸš¨ DEBUG: viewCartBtn found:trueğŸš¨ DEBUG: cart length:0ğŸš¨ DEBUG: cart contents:ğŸš¨ DEBUG: Updating View Cart button:ğŸš¨ DEBUG: View Cart button updated - disabled:true"text:""View Cart"ğŸš¨ DEBUG: updateViewCartButton() calledğŸš¨ DEBUG: updateRecordTransactionButton() calledDEBUG: resetItemDisplay() called. Cart length: 0DEBUG: Clearing 0 input fieldsNo individual buy button found for item:"Fader Trophy"No sell button found for item:"Fader Trophy"No turn-in button found for item:"Fader Trophy"No individual buy button found for item:"The Queen Trophy"No sell button found for item:"The Queen Trophy"No turn-in button found for item:"The Queen Trophy"No individual buy button found for item:"Yagluth Trophy"No sell button found for item:"Yagluth Trophy"No turn-in button found for item:"Yagluth Trophy"No individual buy button found for item:"Moder Trophy"No sell button found for item:"Moder Trophy"No turn-in button found for item:"Moder Trophy"No individual buy button found for item:"Bonemass Trophy"No sell button found for item:"Bonemass Trophy"No turn-in button found for item:"Bonemass Trophy"No individual buy button found for item:"The Elder Trophy"No sell button found for item:"The Elder Trophy"No turn-in button found for item:"The Elder Trophy"No individual buy button found for item:"Eikthyr Trophy"No sell button found for item:"Eikthyr Trophy"No turn-in button found for item:"Eikthyr Trophy"ğŸš¨ DEBUG: resetItemDisplay() calledğŸš¨ DEBUG: showShopView() calledğŸš¨ DEBUG: Setting isCartView to falseğŸš¨ DEBUG: shopInventoryCard found:trueğŸš¨ DEBUG: transactionSummaryCard found:trueğŸš¨ DEBUG: Buttons found - viewCart:true"record:"true"back:"trueğŸš¨ DEBUG: updateViewCartButton() calledğŸš¨ DEBUG: viewCartBtn found:trueğŸš¨ DEBUG: cart length:0ğŸš¨ DEBUG: cart contents:ğŸš¨ DEBUG: Updating View Cart button:ğŸš¨ DEBUG: View Cart button updated - disabled:true"text:""View Cart"ğŸš¨ DEBUG: showShopView() calledğŸš¨ğŸš¨ğŸš¨ DEBUG: clearCart() completed - CART CLEARING FINISHEDLoading shop items for shop ID:"138""rotation:""1"Making API request:"GET""/wp-json/jotun-api/v1/shop-items?shop_id=138&rotation=1"nullRequest config:Sending fetch request...Response received:200"OK"Response data:Raw shop items from API:Making API request:"GET""/wp-json/jotun-api/v1/itemlist"nullRequest config:Sending fetch request...DEBUG: About to force button state update. Cart length: 0ğŸš¨ DEBUG: forceButtonStateUpdate() called, cart length:0ğŸš¨ DEBUG: Cart contents:ğŸš¨ DEBUG: Found 0 turn-in buttons to updateğŸš¨ DEBUG: forceButtonStateUpdate() completedResponse received:200"OK"Response data:Item list response:Enriched shop items:No individual buy button found for item:"Unbreakable Oath"No sell button found for item:"Unbreakable Oath"No turn-in button found for item:"Unbreakable Oath"getCurrentShopType:Setting up tracking interface:ğŸš¨ DEBUG: updateViewCartButton() calledğŸš¨ DEBUG: viewCartBtn found:trueğŸš¨ DEBUG: cart length:0ğŸš¨ DEBUG: cart contents:ğŸš¨ DEBUG: Updating View Cart button:ğŸš¨ DEBUG: View Cart button updated - disabled:true"text:""View Cart"ğŸ” DEBUG Transaction History: selectedShop:"138"ğŸ” DEBUG Transaction History: selectedOption:ğŸ” DEBUG Transaction History: shopName from dataset:"Aesir Spells & Items"ğŸ” DEBUG Transaction History: shopType from dataset:"aesir"ğŸ” DEBUG Transaction History: Aesir shop detected - checking for customer to show ledger balanceğŸ” DEBUG Transaction History: No customer selected for Aesir shopğŸ” DEBUG Transaction History: Added shop_name filter:"Aesir Spells & Items"ğŸ” DEBUG Transaction History: Final params:Making API request:"GET""/wp-json/jotun-api/v1/transactions?shop_name=Aesir+Spells+%26+Items&limit=50"nullRequest config:Sending fetch request...Response received:200"OK"Response data:ğŸ” DEBUG Transaction History: API response:ğŸ” DEBUG Render Transaction History: transactions received:ğŸ” DEBUG Render Transaction History: selectedShop:"138"ğŸ” DEBUG Render Transaction History: Empty state message:"<div class=\"transaction-item\">Aesir shops use a balance system (jotun_ledger) rather than individual transaction records</div>"handleCustomerSearch called with:"T"handleCustomerSearch called with:"Te"Filtered players:handleCustomerSearch called with:"Tes"Filtered players:handleCustomerSearch called with:"Test"Filtered players:Exact match found:"Test"Validating customer:"Test"Making API request:"GET""/wp-json/jotun-api/v1/playerlist?search=Test"nullRequest config:Sending fetch request...Response received:200"OK"Response data:Search API response:Players found from search:Checking player: Test4, activeMatch: false, nameMatch: falseChecking player: Test69, activeMatch: false, nameMatch: falseChecking player: Test11, activeMatch: false, nameMatch: falseChecking player: Test9, activeMatch: false, nameMatch: falseChecking player: Test8, activeMatch: false, nameMatch: falseChecking player: Test7, activeMatch: false, nameMatch: falseChecking player: test5, activeMatch: false, nameMatch: falseChecking player: Test6, activeMatch: false, nameMatch: falseChecking player: Test, activeMatch: true, nameMatch: truePlayer found result:Validation successful for:"Test"ğŸš¨ DEBUG: updateViewCartButton() calledğŸš¨ DEBUG: viewCartBtn found:trueğŸš¨ DEBUG: cart length:0ğŸš¨ DEBUG: cart contents:ğŸš¨ DEBUG: Updating View Cart button:ğŸš¨ DEBUG: View Cart button updated - disabled:true"text:""View Cart"Making API request:"GET""/wp-json/jotun-api/v1/transactions?customer_name=Test&transaction_type=turnin&hours=24"nullRequest config:Sending fetch request...Response received:200"OK"Response data:Daily turn-in data loaded:Preserving quantities and re-rendering items...Saved buy-qty-44: 1No individual buy button found for item:"Unbreakable Oath"No sell button found for item:"Unbreakable Oath"No turn-in button found for item:"Unbreakable Oath"Restored buy-qty-44: 1Recalculating all progress displays based on current input values...Progress recalculation complete.Enter key - exact match found:"Test"handleCustomerSearch called with:"T"handleCustomerSearch called with:"Th"Filtered players:handleCustomerSearch called with:"Tho"Filtered players:handleCustomerSearch called with:"Thor"Filtered players:Exact match found:"Thor"Enter key - exact match found:"Thor"Validating customer:"Thor"Making API request:"GET""/wp-json/jotun-api/v1/playerlist?search=Thor"nullRequest config:Sending fetch request...Response received:200"OK"Response data:Search API response:Players found from search:Checking player: Turk Thorgard, activeMatch: false, nameMatch: falseChecking player: Agathor1, activeMatch: false, nameMatch: falseChecking player: Agathor, activeMatch: false, nameMatch: falseChecking player: Thor, activeMatch: true, nameMatch: truePlayer found result:Validation successful for:"Thor"ğŸš¨ DEBUG: updateViewCartButton() calledğŸš¨ DEBUG: viewCartBtn found:trueğŸš¨ DEBUG: cart length:0ğŸš¨ DEBUG: cart contents:ğŸš¨ DEBUG: Updating View Cart button:ğŸš¨ DEBUG: View Cart button updated - disabled:true"text:""View Cart"Making API request:"GET""/wp-json/jotun-api/v1/transactions?customer_name=Thor&transaction_type=turnin&hours=24"nullRequest config:Sending fetch request...Response received:200"OK"Response data:Daily turn-in data loaded:Preserving quantities and re-rendering items...Saved buy-qty-44: 1No individual buy button found for item:"Unbreakable Oath"No sell button found for item:"Unbreakable Oath"No turn-in button found for item:"Unbreakable Oath"Restored buy-qty-44: 1Recalculating all progress displays based on current input values...Progress recalculation complete.handleCustomerSearch called with:"T"handleCustomerSearch called with:"Te"Filtered players:handleCustomerSearch called with:"Tes"Filtered players:handleCustomerSearch called with:"Test"Filtered players:Exact match found:"Test"Validating customer:"Test"Making API request:"GET""/wp-json/jotun-api/v1/playerlist?search=Test"nullRequest config:Sending fetch request...Response received:200"OK"Response data:Search API response:Players found from search:Checking player: Test4, activeMatch: false, nameMatch: falseChecking player: Test69, activeMatch: false, nameMatch: falseChecking player: Test11, activeMatch: false, nameMatch: falseChecking player: Test9, activeMatch: false, nameMatch: falseChecking player: Test8, activeMatch: false, nameMatch: falseChecking player: Test7, activeMatch: false, nameMatch: falseChecking player: test5, activeMatch: false, nameMatch: falseChecking player: Test6, activeMatch: false, nameMatch: falseChecking player: Test, activeMatch: true, nameMatch: truePlayer found result:Validation successful for:"Test"ğŸš¨ DEBUG: updateViewCartButton() calledğŸš¨ DEBUG: viewCartBtn found:trueğŸš¨ DEBUG: cart length:0ğŸš¨ DEBUG: cart contents:ğŸš¨ DEBUG: Updating View Cart button:ğŸš¨ DEBUG: View Cart button updated - disabled:true"text:""View Cart"Making API request:"GET""/wp-json/jotun-api/v1/transactions?customer_name=Test&transaction_type=turnin&hours=24"nullRequest config:Sending fetch request...Response received:200"OK"Response data:Daily turn-in data loaded:Preserving quantities and re-rendering items...Saved buy-qty-44: 1No individual buy button found for item:"Unbreakable Oath"No sell button found for item:"Unbreakable Oath"No turn-in button found for item:"Unbreakable Oath"Restored buy-qty-44: 1Recalculating all progress displays based on current input values...Progress recalculation complete.handleCustomerSearch called with:"Test4"Filtered players:Exact match found:"Test4"handleCustomerSearch called with:"T"handleCustomerSearch called with:"Te"Filtered players:handleCustomerSearch called with:"Tes"Filtered players:handleCustomerSearch called with:"Test"Filtered players:Exact match found:"Test"Validating customer:"Test"Making API request:"GET""/wp-json/jotun-api/v1/playerlist?search=Test"nullRequest config:Sending fetch request...Response received:200"OK"Response data:Search API response:Players found from search:Checking player: Test4, activeMatch: false, nameMatch: falseChecking player: Test69, activeMatch: false, nameMatch: falseChecking player: Test11, activeMatch: false, nameMatch: falseChecking player: Test9, activeMatch: false, nameMatch: falseChecking player: Test8, activeMatch: false, nameMatch: falseChecking player: Test7, activeMatch: false, nameMatch: falseChecking player: test5, activeMatch: false, nameMatch: falseChecking player: Test6, activeMatch: false, nameMatch: falseChecking player: Test, activeMatch: true, nameMatch: truePlayer found result:Validation successful for:"Test"ğŸš¨ DEBUG: updateViewCartButton() calledğŸš¨ DEBUG: viewCartBtn found:trueğŸš¨ DEBUG: cart length:0ğŸš¨ DEBUG: cart contents:ğŸš¨ DEBUG: Updating View Cart button:ğŸš¨ DEBUG: View Cart button updated - disabled:true"text:""View Cart"Making API request:"GET""/wp-json/jotun-api/v1/transactions?customer_name=Test&transaction_type=turnin&hours=24"nullRequest config:Sending fetch request...Response received:200"OK"Response data:Daily turn-in data loaded:Preserving quantities and re-rendering items...Saved buy-qty-44: 1No individual buy button found for item:"Unbreakable Oath"No sell button found for item:"Unbreakable Oath"No turn-in button found for item:"Unbreakable Oath"Restored buy-qty-44: 1Recalculating all progress displays based on current input values...Progress recalculation complete.getCurrentShopType:ğŸš¨ DEBUG: updateViewCartButton() calledğŸš¨ DEBUG: viewCartBtn found:trueğŸš¨ DEBUG: cart length:1ğŸš¨ DEBUG: cart contents:ğŸš¨ DEBUG: Updating View Cart button:ğŸš¨ DEBUG: View Cart button updated - disabled:false"text:""View Cart (1)"ğŸš¨ DEBUG: updateViewCartButton() calledğŸš¨ DEBUG: viewCartBtn found:trueğŸš¨ DEBUG: cart length:1ğŸš¨ DEBUG: cart contents:ğŸš¨ DEBUG: Updating View Cart button:ğŸš¨ DEBUG: View Cart button updated - disabled:false"text:""View Cart (1)"Switching to cart viewgetCurrentShopType:ğŸ” DEBUG Price calculation:Recording individual transaction:Making API request:"POST""/wp-json/jotun-api/v1/transactions"Request config:Sending fetch request...Failed to load resource: the server responded with a status of 404 (Not Found)Response received:404"Not Found"Response data:API Request failed:Error recording transaction for item:"Unbreakable Oath"Error processing transaction:
 = $1